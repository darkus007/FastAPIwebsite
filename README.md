# FlatsAPI Website v.0.1.0
Backend сайта по подбору квартир. \
Часть проекта Flats, в который также входят [FlatsScrapper](https://github.com/darkus007/FlatsScrapper) - сервис по сбору информации с сайтов застройщиков и наполнению базы данных. 
[FlatsWebsite](https://github.com/darkus007/FlatsWebsite) - сайт по подбору квартир на Django. [FlaskWebsite](https://github.com/darkus007/FlaskWebsite) - сайт по подбору квартир на Flask. 
FlatsTelegramBot - позволяет получать информацию о квартирах в мессенджере Telegram.

Проект по подбору квартир собирает информацию с сайтов застройщиков и отображает в одном месте для удобного поиска по выставленным на продажу квартирам.
Также реализован личный кабинет пользователя, в который зарегистрированный и подтвержденный (по e-mail) пользователь может добавлять квартиры для отслеживания. 
В этом случае на почту пользователя будут приходить уведомления об изменения состояний по выбранным квартирам.
В данный момент установлено ограничение на количество квартир для отслеживания, в дальнейшем будет добавлена платная подписка на снятие ограничений.

В данном проекте реализовано REST API: 
- для управления пользователями (CRUD, верификация по e-mail и восстановление пароля через [Celery](https://docs.celeryq.dev/en/stable/), регистрация и авторизация);
- для управления ЖК, квартирами и ценами (читать могут все (имеются фильтры), править только администраторы).

При разработке использованы паттерны: Репозиторий, UnitOfWork, фабрики, стратегия.

Основные пакеты, фреймворки и технологии: \
[FastAPI](https://fastapi.tiangolo.com); \
[FastAPI Users](https://fastapi-users.github.io/fastapi-users/12.1/); \
[SQLAlchemy](https://www.sqlalchemy.org); \
[Alembic](https://alembic.sqlalchemy.org/); \
[Celery](https://docs.celeryq.dev/en/stable/); \
[Redis](https://redis.io); \
[Flower](https://flower.readthedocs.io); \
[Docker](https://www.docker.com/).

Полный список в фале `pyproject.toml`.

Написан `docker-compose.yml` который упаковывает и запускает приложение в контейнере используя [Nginx](https://nginx.org/ru/) + [Uvicorn](https://www.uvicorn.org).

База данных [PostgreSQL](https://www.postgresql.org/).

## Установка и запуск
Приложение написано на [Python v.3.11](https://www.python.org). \
Скачайте FastAPI Website на Ваше устройство любым удобным способом (например Code -> Download ZIP, распакуйте архив 
или выполните `git clone https://github.com/darkus007/FastAPIwebsite.git`). \
Установите [Docker](https://www.docker.com/), если он у Вас еще не установлен.

### Настройка приложения
Откройте файл `.env` и измените значения переменных окружения на свои.

!!! Приложение запустится без корректировки и изменения указанных в файле `.env` настроек, для теста можно их оставить без изменений !!!

#### Запуск в контейнере Docker
Откройте терминал, перейдите в каталог с приложением (`cd <путь к приложению>/FastAPIwebsite`). \
Выполните команду `docker-compose up -d --build`. Дождитесь сборки и запуска контейнеров. \
Откройте любимый Веб-браузер и перейдите по адресу http://127.0.0.1/docs